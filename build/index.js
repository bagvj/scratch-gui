webpackJsonp([1],{258:function(e,t){!function(){function e(){window.kenrobot=window.kenrobot||top.kenrobot,kenrobot&&(a(),kenrobot.on("app","command",t))}function t(e){switch(e){case"new-project":s={},kenrobot.view.newProject();break;case"open-project":o();break;case"save-project":n();break;case"save-as-project":n(!0)}}function o(e){kenrobot.postMessage("app:projectNewOpen","scratch3",e).then(function(e){s=e.extra,kenrobot.view.loadProject(e.data),kenrobot.trigger("util","message","打开成功")},function(e){kenrobot.trigger("util","message",{text:"打开失败",type:"error"})})}function n(e){var t=function(t){s.path?r(kenrobot.view.getProject(),e):e||!s.name?kenrobot.trigger("prompt","show",{title:"项目保存",placeholder:"项目名字",callback:function(t){if(!t)return void kenrobot.trigger("util","message",{text:"保存失败",type:"error"});s.name=t,r(kenrobot.view.getProject(),e)}}):r(kenrobot.view.getProject(),e)};kenrobot.getUserInfo()||e||s.hasShowSave?t():(s.hasShowSave=!0,kenrobot.trigger("save","show",t))}function r(e,t){var o;o=t?kenrobot.postMessage("app:projectNewSaveAs",s.name,"scratch3",e):kenrobot.postMessage("app:projectNewSave",s.name,"scratch3",e,s.path),o.then(function(e){s=Object.assign(s,e),kenrobot.trigger("util","message","保存成功")},function(e){kenrobot.trigger("util","message",{text:"保存失败",type:"error"})})}function a(){var e=[{key:["ctrl+n","command+n"],callback:function(e){return t("new-project")}},{key:["ctrl+o","command+o"],callback:function(e){return t("open-project")}},{key:["ctrl+s","command+s"],callback:function(e){return t("save-project")}},{key:["ctrl+shift+s","command+shift+s"],callback:function(e){return t("save-as-project")}}];kenrobot.trigger("shortcut","register",e)}var c=function(){function e(e){if(!o&&("onreadystatechange"!==e.type||"complete"===document.readyState)){for(var n=0;n<t.length;n++)t[n].call(document);o=!0,t=null}}var t=[],o=!1;return document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),document.addEventListener("readystatechange",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",e),window.attachEvent("onload",e)),function(e){o?e.call(document):t.push(e)}}(),s={};c(e)}()}},[258]);